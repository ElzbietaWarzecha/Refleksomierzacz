<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="Author" content="EW"/>
    <meta name="Keywords" content=""/>
    <meta name="Description" content="Zadanie domowe JS - refleksomierzacz"/>
    <meta http-equiv="Content-type" content="text/html; charset=UTF-8"/>
    <title>Refleksomierzacz</title>
    <link href="layout.css" type="text/css" rel="stylesheet">
</head>

<body>
<header>
    <h2>REFLEKSOMIERZACZ</h2>
</header>
<section>
    <nav>
        <p>Statystki</p>
        <p>Sprawdź swój refleks! Instrukcja: </p>
        <ol>
            <li>Wciśnij start</li>
            <li>Klikaj w obszar gry, gdy zmieni się kolor obszaru</li>
            <li>Wciśnij stop</li>
            <li>Ciesz się wynikami</li>
        </ol>
    </nav>
    <style>
		.ordinaryButton {
			background: #ffb366;
            font-size: 15px;
            width:128px;
            height:90px;
		}
	    .gameArea {
			background: #ffb366;
            font-size: 15px;
            width:500px;
            height:350px;
		}
		table, th, td {
            border:1px solid black;
        }

    </style>
    <article>

        <p>Obszar gry:</p>
        <button id="obszarGry" class="gameArea" onclick="clickingTimeGameArea()" type="button"></button>
        <button type="button" class="ordinaryButton" onclick="startGame()">START</button>
        <button type="button" class="ordinaryButton" onclick="stopGame()">STOP</button>

<!--        <table style="width:100%">-->
<!--            <tr>-->
<!--                <th>Min. czas reakcji</th>-->
<!--                <th>Max. czas reakcji</th>-->
<!--                <th>Średni czas reakcji</th>-->
<!--            </tr>-->
<!--            <tr>-->
<!--                <td>minReactionTime</td>-->
<!--                <td>maxReactionTime</td>-->
<!--                <td>avgReactionTime</td>-->
<!--            </tr>-->
<!--        </table>-->
    </article>
    <script>
        let userScore;
        let changingColorMoment;
        let userReflex = [];
        let minReactionTime, maxReactionTime, avgReactionTime;
        let statisticsTable;

        function startGame() {
        clearOldResults();
        const colors = ['#FFFF00', '#006400', '#FF00FF', '#00BFFF', '#FFF8DC'];
        createStatisticsTable();
        for (let i = 0; i < 5; i++) {
            setTimeout(() => {
                document.getElementById("obszarGry").style.background = colors.at(i);
                changingColorMoment=(new Date()).getTime();
                },
             ((Math.random() + 2*i )*1000));
            }
        }

        function stopGame() {

        }

        function clearOldResults() {
            userReflex.splice(0, userReflex.length);
        }

        function clickingTimeGameArea() {
            userScore=(new Date()).getTime();
            countReflex();
        }

        function countReflex() {
            userReflex.push(userScore-changingColorMoment);
            let sum = 0;
            userReflex.forEach((num) => { sum += num });
            avgReactionTime = sum / userReflex.length;
            userReflex.sort();
            minReactionTime = userReflex.at(0);
            maxReactionTime = userReflex.at(userReflex.length-1);
        }

    function createStatisticsTable() {
        let body = document.body;
        statisticsTable  = document.createElement('table');
        statisticsTable.style.width  = '1000px';
        statisticsTable.style.border = '1px solid black';

      let newRow = statisticsTable.insertRow(-1);

      let newCell = newRow.insertCell(0);
      let newText = document.createTextNode("Min. czas reakcji");
      newCell.appendChild(newText);
      let newCell2 = newRow.insertCell(1);
      let newText2 = document.createTextNode("Max. czas reakcji");
      newCell2.appendChild(newText2);
      let newCell3 = newRow.insertCell(2);
      let newText3 = document.createTextNode("Średni czas reakcji");
      newCell3.appendChild(newText3);


      let newRowValues = statisticsTable.insertRow(-1);

      let newCellValue = newRowValues.insertCell(0);
      let newTextValue = document.createTextNode("null");
      newCellValue.appendChild(newTextValue);
      let newCellValue2 = newRowValues.insertCell(1);
      let newTextValue2 = document.createTextNode("null");
      newCellValue2.appendChild(newTextValue2);
      let newCellValue3 = newRowValues.insertCell(2);
      let newTextValue3 = document.createTextNode("null");
      newCellValue3.appendChild(newTextValue3);

      body.appendChild(statisticsTable);
    }




    </script>
</section>
</body>
</html>